<section>
  <h2>Transaction</h2>
  <p>A <em>transaction</em> is used to interact with data in a database. Data is
  read from or written to database via transaction.</p>

  <p>All transactions are associated with a database connection, which is the
  <em>connection</em> that the transaction is created within. A transaction has
  a predetermined <em>mode</em> to indicate what access this transaction is
  asking for. The mode is set when the transaction is created and remains fixed
  for the life of the transaction. There are two transaction modes:</p>

  <dl title="enum TransactionMode" class="idl">
    <dt>readonly</dt>
    <dd>Transaction intends to read rows only.</dd>
    <dt>readwrite</dt>
    <dd>Transaction intends to read/write rows and/or change schema.</dd>
  </dl>

  <p>A transaction contains one or more <em>queries</em> that indicate how to
  interact with the database. A transaction is an atomic unit of execution that
  guarantees all queries inside this transaction to be committed as a whole, or
  none get committed. A committed transaction guarantees all persistent data
  being written to the persistent storage.</p>

  <p>A transaction has a <em>scope</em> that determines the rows affected by
  this transaction. The scope is automatically calculated. A transaction's scope
  can dynamically change for the lifetime of the transaction.</p>

  <p>A transaction can be created explicitly or implicitly. An explicit
  transaction is created directly from connection's
  <code>createTransaction()</code> function. An implicit transaction is created
  from a query's <code>commit()</code> method.</p>

  <p>A transaction's lifetime is controlled by the user. For implicit
  transactions, <code>commit()</code> starts the execution of transaction, and
  returns a result <code>Promise</code>. The promise is resolved if and only if
  the transaction is committed, and is rejected if the transaction did not
  commit. For explicit transaction, there are two ways to start execution:
  <em>batch mode</em> and <em>sequence mode</em>. In batch mode, explicit
  transaction is started with <code>exec(queriesArray)</code> and returns
  a result <code>Promise</code>. All queries will be executed sequentially in
  the order received, and the results of last query in the transaction are
  returned in the promise. In sequence mode, user calls <code>begin()</code> to
  start the transaction, calls <code>attach(query)</code> to attach a query to
  the transaction's execution context. The user can call <code>commit()</code>
  to indicate the end of transaction, and a result <code>Promise</code> will be
  returned; or the user can call <code>rollback()</code> to abort the
  transaction, and all modifications done by previous attached queries will be
  discarded.</p>

  <p>When a transaction is committed or rolled back, it is said to be
  <em>finished</em>. A finished transaction cannot be started nor rolled back.
  If a transaction's connection is lost before transaction being finished, the
  transaction is effectively aborted and no changes will be persisted.</p>

</section>
