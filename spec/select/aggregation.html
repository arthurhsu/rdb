<section>
  <h2>Aggregation</h2>
  <p>Aggregation is a special data selection performed via
  <a>ISelectQuery.groupBy</a> function. The aggregation functions supported are
  defined in the following.</p>
  <pre class="idl">
    interface IAggregateFunction {
      IColumn avg(IColumn col);
      IColumn count(optional IColumn col = null);
      IColumn distinct(IColumn... col);
      IColumn max(IColumn col);
      IColumn min(IColumn col);
      IColumn stddev(IColumn col);
      IColumn sum(IColumn col);
      IColumn var(IColumn col);
    };
  </pre>
  <dl class="methods">
    <dt><code>IColumn avg(IColumn col);</code></dt>
    <dd>Calculate the arithematic average of non-null values of column
    <code>col</code> for all rows grouped. If there are no rows with non-null
    values, or the column is not typed as <code>number</code>, returns
    <code>0</code>. The returned column is always typed as
    <code>number</code>.</dd>
    <dt><code>IColumn count(IColumn col);</code></dt>
    <dd>Count the number of rows. If <code>col</code> is NOT <code>null</code>,
    returns number of rows in the group whose <code>col</code> is not null,
    otherwise returns the total number of rows in the group.</dd>
    <dt><code>IColumn distinct(IColumn... col);</code></dt>
    <dd>Returns distinct value tuples of the specified columns in all grouped
    rows. <code>null</code> is considered as a unique value.</dd>
    <dt><code>IColumn max(IColumn col);</code></dt>
    <dd>Returns the maximum value of the column <code>col</code> for all rows
    grouped. The maximum value is determined by the last value of the
    <code>orderBy()</code> performed on that column. The <code>max()</code>
    function returns <code>null</code> if and only if all values grouped are
    <code>null</code>.</dd>
    <dt><code>IColumn min(IColumn col);</code></dt>
    <dd>Returns the minimum value of the column <code>col</code> for all rows
    grouped. The minimum value is determined by the first value of the
    <code>orderBy()</code> performed on that column. The <code>max()</code>
    function returns <code>null</code> if and only if all values grouped are
    <code>null</code>.</dd>
    <dt><code>IColumn stddev(IColumn col);</code></dt>
    <dd>Similar to <code>avg()</code>, but returns standard deviation.</dd>
    <dt><code>IColumn sum(IColumn col);</code></dt>
    <dd>Calculate the arithematic sum of non-null values of column
    <code>col</code> for all rows grouped. If there are no non-null rows, or
    the column is not typed as <code>number</code>, returns <code>null</code>.
    The returned column is always typed as <code>number</code>.</dd>
    <dt><code>IColumn var(IColumn col);</code></dt>
    <dd>Similar to <code>avg()</code>, but returns statistical variance.</dd>
  </dl>
  <p>The <a>IColumn</a> objects returned by
  <a>IAggregateFunction</a> MUST NOT be convertible to <a>Column</a> objects.
  </p>
  <section>
  <h2>Limitations of Grouping</h2>
  <p>Aggregation can only happen on a single table. If the select scope
  contains more than one table, a <a>SyntaxError</a> will be thrown.</p>
  <p>The aggregation can happen for the given table without a
  <code>groupBy()</code> function, which implies grouping on all rows of that
  table.</p>
  <p>If the <code>groupBy()</code> is present, the <a>projection list</a> MUST
  consist of either the columns in projection list, or aggregation functions.
  The parameters of aggregation functions MUST be either <code>undefined</code>
  if allowed by signature, or from the columns provided as
  <code>groupBy()</code> parameters.</p>
  <p>If grouping and search conditions are both provided, search conditions
  will be evaluated first, and grouping will be operated on top of the filtered
  rows.</p>
  <p class="note">Aggregation by expression is not supported.</p>
  </section>
</section>
